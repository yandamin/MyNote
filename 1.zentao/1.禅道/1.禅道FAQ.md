#### php 版本

```
windows一键安装包php版本可以在控制面板查看。
linux一键安装包可以使用命令 /opt/zbox/bin/php -v 查看php版本。
```



#### 常用文件文件夹

```shell
windows
	apache配置文件
	xampp/runner/res/apache/conf/httpd.conf
	xampp/apache/conf/httpd.conf
	
	php.ini:xampp/runner/res/php/php.ini

	mysql文件:zentao(pro/ep/pms)/config/my.php
	xampp/mysql/data/zentao

linux
	apache配置文件：/opt/zbox/etc/apache/httpd.conf
	php.ini:/opt/zbox/etc/php/php.ini
	mysql文件：/opt/zbox/app/zentaoep/db/
	zentao(pro/ep/pms)/config/my.php
	/opt/zbox/data/mysql/

备份 & 附件文件夹
    zentao(pms/ep/pro)/tmp/backup  /opt/zbox/app/zentao/tmp/backup
    zentao(pro/ep/pms)/www/data/upload/1
```

#### xxd

>   可以看下客户端集成文档:  https://www.zentao.net/book/zentaopmshelp/302.html

```
13:47:51 Uncaught LengthException: The ciphertext has an invalid padding length (0) compared to the block size (16) in lib/phpaes/phpseclib/Crypt/Common/SymmetricKey.php:1989
Stack trace:
#0 lib/phpaes/phpseclib/Crypt/Common/SymmetricKey.php(1386): SymmetricKey->unpad('')
#1 lib/phpaes/phpaes.class.php(33): SymmetricKey->decrypt('')
#2 framework/xuanxuan.class.php(357): phpAES->decrypt('')
#3 framework/xuanxuan.class.php(102): xuanxuan->decrypt('')
#4 framework/xuanxuan.class.php(44): xuanxuan->setInput()
x.php是提供给 xxd 的一个接口，这个报错是指 x.php 想要的是一个加密的数据，却收到浏览器传来的普通数据，所以报错，此报错并没有什么影响。

- xxd服务是否正常启动？截图看下。
- 截图看下服务端 xxd.conf 配置文件内容。
- 截图看下禅道软件 后台-客户端 - 参数页面内容。
- xxd.conf 中的 debug=2 然后重启xxd服务。
- 本机 telnet xxd服务端ip 11443 11444 端口截图看下通吗？（排除防火墙，端口问题）
- 客户端访问连接有添加http前缀吗？
- https://www.zentao.net/book/zentaopmshelp/302.html 看下手册的，第五步注意事项
截图看下 (zbox/etc/apache/httpd.conf) (xampp\apache\conf) 文件是否有 x.php 的配置 (配出升级版本,没有此配置)

xxd后台运行：nohup ./xxd &
```



#### 禅道安装过程中遇到的问题

```
企业版安装中第四步设置账号点击保存失败: 
1. 是不是源码包安装的 , 是否配置了 ioncube 扩展
2. 不导入 demo 数据试下
3. 删除数据库表数据和表结构,重新安装下
4. 安装的时候是使用的mysql的账号有删除表的操作权限吗?
5. debug 日志看下
6. apache 与 mysql的日志文件看下
```



#### 附件大小

```
windows一键安装包默认设置成50M，源码安装php默认是2M最大附件。
源码包安装 调整php.ini 中的 post_max_size 和 upload_max_filesize值，重启apache即可。
nginx 修改配置client_max_body_size参数。
上传文件过大可能会导致上传超时，限制30秒。
大附件，推荐使用共享文件或者网盘去管理，禅道中使用链接的方式引入下。（可以了解下我们的悦库网盘：http://www.ydisk.cn/）
```



#### debug

```
zentao(pro/biz/pms)/config/my.php(db.php) 中debug的值改成true 重新操作一下, 看日志文件
zentao(pms/biz/pro)/tmp/log/php开头的今天的文件有什么报错。注：不要找sql开头的文件。
```



#### 多人任务  子任务

```
批量创建子任务的时候需要创建不同的名称,可以试一下创建事务类型的任务, 事务类型的任务可以指派多人的
相同的任务名称需要间隔1 分钟以上才可以重复创建.

多人任务是串行的,第一个人完成会默认指派给下一个人,如果多人同时执行的话,建议创建子任务
```



```
windows一键安装包安装第二套禅道
前提：用禅道windows一键安装包安装好禅道，并能用网页正常访问。
1. 备份当前xampp包，可以直接拷贝一份进行备份。
2. 下载第二套禅道的对应版本的源码包（注意是源码包），解压到 xampp/htdocs/下面 得到 xampp/htdocs/zentaopms/ 目录。
3. 修改xampp/htdocs/zentaopms/config/config.php中的 sid 改成 zid。
4. 修改xampp/htdocs/zentaopms/www/.ztaccess 第8行中间部分 /zentao/index.php/$1 改成 /zentaopms/www/index.php/$1
5. 修改xampp/runner/res/apache/conf/httpd.conf 把89行 SetHandler text/plain 改成 SetHandler application/x-httpd-php
6. 网页访问ip:端口/zentaopms/www/install.php按照提示进行安装。注意数据库要和之前数据库名称不同（之前禅道默认用的数据库是zentao 或者 zentaopro）。

linux一键安装包安装第二套禅道
前提：用禅道linux一键安装包安装好禅道，并能用网页正常访问。
1、备份当前zbox包，可以直接拷贝一份进行备份。
2、下载第二套禅道的对应版本的源码包（注意是源码包），解压到 /opt/zbox/app/htdocs/下面 得到 /opt/zbox/app/htdocs/zentaopms/ 目录。
3、修改/opt/zbox/app/htdocs/zentaopms/config/config.php 中的 sid 改成 zid。
4、修改/opt/zbox/app/htdocs/zentaopms/www/.ztaccess 第8行中间部分 /zentao/index.php/$1 改成 /zentaopms/www/index.php/$1
5、网页访问 ip:端口/zentaopms/www/install.php 按照提示进行安装。注意数据库要和之前数据库名称不同（之前禅道默认用的数据库是zentao 或者 zentaopro）。
```



```
apache 没有解析php文件
1. 看下浏览器的访问地址
2. 可以修改下apache的配置文件, 允许此目录下的文件被解析
3. windows 一键安装包有两个文件需要修改: xampp/apache/conf/httpd.conf   xampp/runner/res/apache/conf/httpd.conf
4. 修改apache 配置后需要重启下
```



```
telnet 服务器ip 禅道服务端口，截图看下。
windows 开启telnet 文档:  https://blog.csdn.net/qq_35428201/article/details/81048134
```

